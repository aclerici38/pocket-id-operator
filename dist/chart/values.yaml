# PocketIDInstance configuration
# Creates a PocketIDInstance custom resource when enabled
# Full documentation: https://github.com/aclerici38/pocket-id-operator/blob/main/docs/pocketidinstance.md
instance:
  enabled: true
  name: pocket-id
  labels: {}
  annotations: {}

  # PocketIDInstance spec â€” all fields from the CRD are supported here
  # See docs for all available options (SMTP, LDAP, S3, UI, user management, etc.)
  spec:
    encryptionKey:
      # value: "your-encryption-key-here-min-16-bytes"
      # valueFrom:
      #   secretKeyRef:
      #     name: pocket-id-encryption-key
      #     key: encryption-key

    # appUrl: "https://auth.example.com"

    # databaseUrl:
    #   valueFrom:
    #     secretKeyRef:
    #       name: pocket-id-db
    #       key: uri

    persistence:
      enabled: true
      size: 1Gi

    metrics:
      enabled: false

    # route:
    #   enabled: true
    #   parentRefs:
    #     - name: my-gateway

  # ServiceMonitor for the PocketIDInstance (requires metrics.enabled)
  serviceMonitor:
    enabled: false

# PocketIDUser configuration
# Full documentation: https://github.com/aclerici38/pocket-id-operator/blob/main/docs/pocketiduser.md
users: []
  # - name: admin-user
  #   spec:
  #     admin: true
  #     email:
  #       value: "admin@example.com"
  #     firstName:
  #       value: "Admin"

# Operator deployment configuration
operator:
  replicas: 1

  image:
    repository: ghcr.io/aclerici38/pocket-id-operator
    tag: "" # Defaults to Chart.appVersion
    pullPolicy: IfNotPresent

  args: []
  env: []

  podSecurityContext:
    runAsNonRoot: true
    seccompProfile:
      type: RuntimeDefault

  securityContext:
    allowPrivilegeEscalation: false
    capabilities:
      drop:
        - ALL
    readOnlyRootFilesystem: true

  resources:
    limits:
      cpu: 500m
      memory: 128Mi
    requests:
      cpu: 10m
      memory: 64Mi

# Operator metrics configuration
metrics:
  enable: false
  port: 8443
  serviceMonitor:
    enable: false
