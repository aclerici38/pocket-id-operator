{{- range $index, $manifest := .Values.extraManifests }}
---
{{- $parsed := tpl $manifest $ | fromYaml }}
apiVersion: {{ $parsed.apiVersion }}
kind: {{ $parsed.kind }}
metadata:
  {{- if $parsed.metadata }}
  {{- toYaml $parsed.metadata | nindent 2 }}
  {{- end }}
  annotations:
    {{- if $parsed.metadata.annotations }}
    {{- toYaml $parsed.metadata.annotations | nindent 4 }}
    {{- end }}
    "helm.sh/hook": post-install,post-upgrade
    "helm.sh/hook-weight": "1"
{{- if $parsed.spec }}
spec:
  {{- toYaml $parsed.spec | nindent 2 }}
{{- end }}
{{- if $parsed.data }}
data:
  {{- toYaml $parsed.data | nindent 2 }}
{{- end }}
{{- if $parsed.stringData }}
stringData:
  {{- toYaml $parsed.stringData | nindent 2 }}
{{- end }}
{{- end }}
